<html>
  <head>
    <script>
      const APPNAME = "katai5plate/easy-notepad";
      let TITLE;
      const intervalTime = 1000;
      let diff = "", saved = false;
      const savedTime = () => (new Date()).toString().match(/\d{2}:\d{2}:\d{2}/)[0];
      const titleLabel = () => `${saved ? "ðŸ’¾" : ""}${TITLE ? TITLE : savedTime()}`;
      const editorOnChange = () => {
        const now = document.body.innerHTML;
        if(diff !== now){
          console.log("changed!");
          localStorage[APPNAME] = document.body.innerHTML;
          document.title = titleLabel();
          diff = now;
          saved = true;
        }else{
          if(saved) saved = false;
        }
      };
      const bodyOnLoad = () => {
        console.log("init!");
        if(!!localStorage[APPNAME]){
          document.body.innerHTML = localStorage[APPNAME];
          console.log("loaded!");
        }
      };
      setInterval(editorOnChange, intervalTime);
    </script>
  </head>
  <body contenteditable onload="bodyOnLoad()"></body>
</html>
